# Video2Text CLI (V2T)

ä¸€ä¸ªè½»é‡çº§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºå°†è§†é¢‘è‡ªåŠ¨è½¬æ¢ä¸ºæ–‡å­—ç¨¿ã€‚æ”¯æŒ YouTubeã€Bilibili ç­‰ä¸»æµè§†é¢‘å¹³å°ï¼Œåˆ©ç”¨ OpenAI Whisper æ¨¡å‹åœ¨æœ¬åœ°è¿›è¡Œé«˜è´¨é‡è¯­éŸ³è½¬å†™ã€‚

## ğŸŒŸ ç‰¹æ€§

*   **å…¨è‡ªåŠ¨åŒ–**ï¼šä¸‹è½½ -> éŸ³é¢‘æå– -> AI è½¬å†™ -> å¯¼å‡ºæ–‡ç¨¿ï¼Œä¸€é”®å®Œæˆã€‚
*   **æœ¬åœ°éšç§**ï¼šä½¿ç”¨ `faster-whisper` åœ¨æœ¬åœ°è¿è¡Œæ¨¡å‹ï¼Œæ•°æ®ä¸ä¸Šä¼ äº‘ç«¯ã€‚
*   **åŒå¼•æ“æ”¯æŒ**ï¼š
    *   **Whisper** (é»˜è®¤)ï¼šé€šç”¨æ€§å¼ºï¼ŒOpenAI å‡ºå“ã€‚
    *   **FunASR (SenseVoice)**ï¼šé’ˆå¯¹ä¸­æ–‡ä¼˜åŒ–ï¼Œè¯†åˆ«å‡†ç¡®ç‡æé«˜ï¼Œé€Ÿåº¦å¿«ã€‚
*   **WebUI ç•Œé¢**ï¼šæä¾›å¯è§†åŒ–çš„ Web ç•Œé¢ï¼Œæ“ä½œæ›´ä¾¿æ·ã€‚
*   **é«˜æ€§èƒ½**ï¼šé’ˆå¯¹ macOS Apple Silicon (M1/M2/M3) ä¼˜åŒ–ï¼ŒCPU è¿è¡Œé€Ÿåº¦æå¿«ã€‚
*   **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒå¯¼å‡º `.txt` çº¯æ–‡æœ¬å’Œ `.srt` å­—å¹•æ–‡ä»¶ã€‚
*   **Cookie æ”¯æŒ**ï¼šæ”¯æŒåŠ è½½ cookies.txt ä»¥ä¸‹è½½ä¼šå‘˜/å¹´é¾„é™åˆ¶è§†é¢‘ã€‚

## ğŸ› ï¸ å®‰è£…

### 1. å‰ç½®è¦æ±‚

*   macOS (æ¨è Apple Silicon æœºå‹)
*   Python 3.9+
*   FFmpeg (å¿…é¡»å®‰è£…)

```bash
brew install ffmpeg
```

### 2. è·å–ä»£ç ä¸å®‰è£…ä¾èµ–

```bash
# å…‹éš†ä»“åº“ (å¦‚æœæ‚¨æœ‰ git) æˆ–ä¸‹è½½æºç 
git clone https://github.com/your-username/V2T.git
cd V2T

# å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x v2t.py
```

## ğŸš€ ä½¿ç”¨æŒ‡å—

### ğŸ–¥ï¸ WebUI ç•Œé¢ (æ¨è)

å¦‚æœæ‚¨æ›´å–œæ¬¢å›¾å½¢ç•Œé¢ï¼Œå¯ä»¥ç›´æ¥å¯åŠ¨ WebUIï¼š

```bash
python webui.py
```

å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®æ˜¾ç¤ºçš„æœ¬åœ°é“¾æ¥ï¼ˆé€šå¸¸æ˜¯ `http://127.0.0.1:7860`ï¼‰ã€‚

### ğŸ’» å‘½ä»¤è¡Œç”¨æ³•

### åŸºæœ¬ç”¨æ³•

ç›´æ¥è½¬æ¢å•ä¸ªè§†é¢‘ï¼š

```bash
./v2t.py "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
```

### æ‰¹é‡å¤„ç†

åˆ›å»ºä¸€ä¸ªåŒ…å«å¤šä¸ªé“¾æ¥çš„æ–‡æœ¬æ–‡ä»¶ `urls.txt`ï¼š

```text
https://www.youtube.com/watch?v=video1
https://www.bilibili.com/video/BVxxx
```

ç„¶åè¿è¡Œï¼š

```bash
./v2t.py urls.txt
```

### å¸¸ç”¨å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- |
| `urls` | è§†é¢‘é“¾æ¥æˆ–é“¾æ¥æ–‡ä»¶è·¯å¾„ | `v2t.py url1 url2` |
| `--engine` | ASR å¼•æ“: `whisper` (é»˜è®¤) æˆ– `funasr` (SenseVoice) | `--engine funasr` |
| `--model` | Whisper æ¨¡å‹å¤§å° (tiny/base/small/medium/large-v3) | `--model large-v3` (é»˜è®¤ small) |
| `--language` | å¼ºåˆ¶æŒ‡å®šæºè¯­è¨€ä»£ç  | `--language zh` (é»˜è®¤è‡ªåŠ¨æ£€æµ‹) |
| `--task` | ä»»åŠ¡ç±»å‹: `transcribe`(è½¬å†™) æˆ– `translate`(ç¿»è¯‘ä¸ºè‹±æ–‡) | `--task translate` |
| `--output`, `-o` | è¾“å‡ºç›®å½• | `-o ./my_docs` |
| `--format` | è¾“å‡ºæ ¼å¼: `txt`, `srt`, `all` | `--format srt` |
| `--cookies` | æŒ‡å®š cookies.txt æ–‡ä»¶è·¯å¾„ | `--cookies ./cookies.txt` |
| `--keep-audio` | ä¿ç•™ä¸‹è½½çš„éŸ³é¢‘æ–‡ä»¶ (é»˜è®¤åˆ é™¤) | `--keep-audio` |

### é«˜çº§ç¤ºä¾‹

**ä½¿ç”¨ Large-v3 æ¨¡å‹å¹¶å¯¼å‡º SRT å­—å¹•ï¼š**

```bash
./v2t.py "https://youtu.be/xxx" --model large-v3 --format srt
```

**ä½¿ç”¨ Cookie ä¸‹è½½ä¼šå‘˜è§†é¢‘ï¼š**

å°†å¯¼å‡ºçš„ `cookies.txt` æ”¾åœ¨åŒçº§ç›®å½•ï¼Œæˆ–æ‰‹åŠ¨æŒ‡å®šï¼š

```bash
./v2t.py "https://www.bilibili.com/video/BVxxx" --cookies ./my_cookies.txt
```

## ğŸ“ æ³¨æ„äº‹é¡¹

*   **æ¨¡å‹ä¸‹è½½**ï¼šé¦–æ¬¡è¿è¡ŒæŸä¸ªæ¨¡å‹ï¼ˆå¦‚ `small`ï¼‰æ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨ä» Hugging Face ä¸‹è½½æ¨¡å‹æƒé‡ï¼Œè¯·ä¿æŒç½‘ç»œé€šç•…ã€‚
*   **æ–‡ä»¶å**ï¼šè¾“å‡ºæ–‡ä»¶åæ ¼å¼ä¸º `æ ‡é¢˜_è§†é¢‘ID`ï¼Œä¼šè‡ªåŠ¨å»é™¤éæ³•å­—ç¬¦ã€‚
*   **æ€§èƒ½**ï¼šåœ¨ M1/M2/M3 èŠ¯ç‰‡ä¸Šï¼Œæ¨èä½¿ç”¨é»˜è®¤çš„ `--device cpu`ï¼Œé…åˆ `faster-whisper` çš„ int8 é‡åŒ–ï¼Œé€Ÿåº¦éå¸¸å¿«ä¸”çœç”µã€‚

## ğŸ“„ è®¸å¯è¯

MIT License
